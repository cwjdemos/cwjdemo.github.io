webpackJsonp([1],{EQ5Y:function(n,e){},LBVU:function(n,e){},NHnr:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("7+uW"),o={render:function(){var n=this.$createElement,e=this._self._c||n;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=t("VU/8")({name:"App"},o,!1,function(n){t("tjgF")},null,null).exports,i=t("/ocq"),r=t("BO1k"),p=t.n(r),c=t("ZnLv"),m=t.n(c),l={a:"C4",s:"D4",d:"E4",f:"F4",g:"G4",h:"A4",j:"B4",k:"C5",l:"D5"},u=(new m.a.Synth).toMaster(),f=function(n){u.triggerAttack(l[n])},d=function(){u.triggerRelease()},v=t("1Itq"),b=[{name:"A0",pos:0},{name:["A#0","Bb0"],pos:.5},{name:"B0",pos:1},{name:"C1",pos:2},{name:["C#1","Db1"],pos:2.5},{name:"D1",pos:3},{name:["D#1","Eb1"],pos:3.5},{name:"E1",pos:4},{name:"F1",pos:5},{name:["F#1","Gb1"],pos:5.5},{name:"G1",pos:6},{name:["G#1","Ab1"],pos:6.5},{name:"A1",pos:7},{name:["A#1","Bb1"],pos:7.5},{name:"B1",pos:8},{name:"C2",pos:9},{name:["C#2","Db2"],pos:9.5},{name:"D2",pos:10},{name:["D#2","Eb2"],pos:10.5},{name:"E2",pos:11},{name:"F2",pos:12},{name:["F#2","Gb2"],pos:12.5},{name:"G2",pos:13},{name:["G#2","Ab2"],pos:13.5},{name:"A2",pos:14},{name:["A#2","Bb2"],pos:14.5},{name:"B2",pos:15},{name:"C3",pos:16},{name:["C#3","Db3"],pos:16.5},{name:"D3",pos:17},{name:["D#3","Eb3"],pos:17.5},{name:"E3",pos:18},{name:"F3",pos:19},{name:["F#3","Gb3"],pos:19.5},{name:"G3",pos:20},{name:["G#3","Ab3"],pos:20.5},{name:"A3",pos:21},{name:["A#3","Bb3"],pos:21.5},{name:"B3",pos:22},{name:"C4",pos:23},{name:["C#4","Db4"],pos:23.5},{name:"D4",pos:24},{name:["D#4","Eb4"],pos:24.5},{name:"E4",pos:25},{name:"F4",pos:26},{name:["F#4","Gb4"],pos:26.5},{name:"G4",pos:27},{name:["G#4","Ab4"],pos:27.5},{name:"A4",pos:28},{name:["A#4","Bb4"],pos:28.5},{name:"B4",pos:29},{name:"C5",pos:30},{name:["C#5","Db5"],pos:30.5},{name:"D5",pos:31},{name:["D#5","Eb5"],pos:31.5},{name:"E5",pos:32},{name:"F5",pos:33},{name:["F#5","Gb5"],pos:33.5},{name:"G5",pos:34},{name:["G#5","Ab5"],pos:34.5},{name:"A5",pos:35},{name:["A#5","Bb5"],pos:35.5},{name:"B5",pos:36},{name:"C6",pos:37},{name:["C#6","Db6"],pos:37.5},{name:"D6",pos:38},{name:["D#6","Eb6"],pos:38.5},{name:"E6",pos:39},{name:"F6",pos:40},{name:["F#6","Gb6"],pos:40.5},{name:"G6",pos:41},{name:["G#6","Ab6"],pos:41.5},{name:"A6",pos:42},{name:["A#6","Bb6"],pos:42.5},{name:"B6",pos:43},{name:"C7",pos:44},{name:["C#7","Db7"],pos:44.5},{name:"D7",pos:45},{name:["D#7","Eb7"],pos:45.5},{name:"E7",pos:46},{name:"F7",pos:47},{name:["F#7","Gb7"],pos:47.5},{name:"G7",pos:48},{name:["G#7","Ab7"],pos:48.5},{name:"A7",pos:49},{name:["A#7","Bb7"],pos:49.5},{name:"B7",pos:50},{name:"C8",pos:51}],h=new a.a,y={data:function(){return{active:!1}},props:["config"],mounted:function(){var n=this,e=function(e){h.$on("attackRelease-"+e,function(e){n.active=!0,setTimeout(function(){n.active=!1},1e3*e)})};this.config.name.push?this.config.name.forEach(function(n){return e(n)}):e(this.config.name)}},g={render:function(){var n=this.$createElement,e=this._self._c||n;return e("div",{staticClass:"key",class:this.config.name.push?"black":"white",style:{left:1.92308*this.config.pos+"%"}},[e("div",{staticClass:"fill",class:{active:this.active}})])},staticRenderFns:[]},A={components:{item:t("VU/8")(y,g,!1,null,null,null).exports},data:function(){return{config:b}}},E={render:function(){var n=this.$createElement,e=this._self._c||n;return e("div",{staticClass:"keyboard"},this._l(this.config,function(n,t){return e("item",{key:t,attrs:{config:n}})}))},staticRenderFns:[]};var D=t("VU/8")(A,E,!1,function(n){t("EQ5Y")},null,null).exports,F=t("d7EF"),k=t.n(F),C=[["#7591ff","#0033ff"],["#cc9d6a","#cc740f"],["#b8635c","#bb1907"],["#ccc","#bbb"],["#ccc","#bbb"],["#ccc","#bbb"],["#ccc","#bbb"],["#ccc","#bbb"]],w=null,_=null,G=!1,B=!1,$=!0,R={},T=!0,x=!1,U=void 0;try{for(var V,M=p()(b);!(T=(V=M.next()).done);T=!0){var P=V.value,S=P.name,j=P.pos;S.push?(R[S[0]]=j,R[S[1]]=j):R[S]=j}}catch(n){x=!0,U=n}finally{try{!T&&M.return&&M.return()}finally{if(x)throw U}}var L={props:["midi"],mounted:function(){var n=this;h.$on("play",function(){$&&(w=Date.now()),B&&(w+=Date.now()-_),G=!0,B=!1,!1,$=!1}),h.$on("pause",function(){G&&(_=Date.now(),G=!1,B=!0,!1,$=!1)}),h.$on("stop",function(){w=null,G=!1,B=!1,!1,$=!0});var e,t=[(e=this.$el).clientWidth,e.clientHeight],a=k()(t,2),o=a[0],s=a[1],i=document.createElement("canvas");i.width=o,i.height=s,this.$el.appendChild(i);var r=i.getContext("2d");requestAnimationFrame(function e(){!function(n,e,t){n.clearRect(0,0,e,t)}(r,o,s);var t=void 0;G&&(t=Date.now()-w),B&&(t=_-w),$&&(t=0),t/=1e3,function(n,e,t,a,o,s){if(e){n.beginPath();var i=.0192308*a,r=function(e,a,r,p){var c=2===e.length?p[0]:p[1],m=2===e.length?i:i-8,l=t-(a+r-s)*o,u=2===e.length?R[e]*i:R[e]*i+4,f=l,d=m,v=o*r,b=Math.min(d,v)/2;n.moveTo(u+b,f),n.arcTo(u+d,f,u+d,f+v,b),n.arcTo(u+d,f+v,u,f+v,b),n.arcTo(u,f+v,u,f,b),n.arcTo(u,f,u+d,f,b),n.fillStyle=c,n.strokeStyle="#333",n.closePath(),n.fill(),n.beginPath()};e.tracks.filter(function(n){return n.notes.length}).map(function(n){return n.notes.map(function(n){return{name:n.name,time:n.time,duration:n.duration}})}).forEach(function(n,e){var a=!0,i=!1,c=void 0;try{for(var m,l=p()(n);!(a=(m=l.next()).done);a=!0){var u=m.value,f=u.name,d=u.time,v=u.duration;(d+v-s)*o>0&&t-(d-s)*o>0&&r(f,d,v,C[e])}}catch(n){i=!0,c=n}finally{try{!a&&l.return&&l.return()}finally{if(i)throw c}}}),n.closePath()}}(r,n.midi,s,o,200,t),requestAnimationFrame(e)})}},q={render:function(){var n=this.$createElement;return(this._self._c||n)("div",{staticStyle:{height:"400px"}})},staticRenderFns:[]},H={props:["midi"],data:function(){return{component:"flow"}},components:{flow:t("VU/8")(L,q,!1,null,null,null).exports}},O={render:function(){var n=this.$createElement,e=this._self._c||n;return e("div",[e("div",{staticClass:"select"}),this._v(" "),e(this.component,{tag:"component",attrs:{midi:this.midi}})],1)},staticRenderFns:[]},N={data:function(){return{loaded:!1,midi:null}},methods:{readMidi:function(n){var e=this,t=n.target.files[0],a=new FileReader;a.onload=function(n){e.midi=Object(v.a)(n.target.result),e.loaded=!1,e.play()},a.readAsBinaryString(t)},play:function(){var n=this;this.midi&&(this.loaded||function(){var e=new m.a.PolySynth(8).toMaster();n.stop(),m.a.Transport.cancel(0),m.a.Transport.bpm.value=n.midi.header.bpm;var t=!0,a=!1,o=void 0;try{for(var s,i=p()(n.midi.tracks);!(t=(s=i.next()).done);t=!0){var r=s.value.notes;new m.a.Part(function(n,t){h.$emit("attackRelease-"+t.name,t.duration),e.triggerAttackRelease(t.name,t.duration,m.a.now(),t.velocity)},r).start()}}catch(n){a=!0,o=n}finally{try{!t&&i.return&&i.return()}finally{if(a)throw o}}n.loaded=!0}(),h.$emit("play"),m.a.Transport.start())},pause:function(){h.$emit("pause"),m.a.Transport.pause()},stop:function(){h.$emit("stop"),m.a.Transport.stop()}},components:{keyboard:D,tune:t("VU/8")(H,O,!1,null,null,null).exports},mounted:function(){var n=this;document.addEventListener("keydown",function(e){n.playing[e.key]||(n.playing[e.key]=!0,f(e.key))}),document.addEventListener("keyup",function(e){n.playing[e.key]=!1,d()})}},Q={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("input",{attrs:{type:"file"},on:{change:n.readMidi}}),n._v(" "),t("button",{on:{click:n.play}},[n._v("play")]),n._v(" "),t("button",{on:{click:n.pause}},[n._v("pause")]),n._v(" "),t("button",{on:{click:n.stop}},[n._v("stop")]),n._v(" "),t("div",{staticClass:"tune-wrap"},[t("tune",{attrs:{midi:n.midi}})],1),n._v(" "),t("div",{staticClass:"kb-wrap"},[t("keyboard")],1)])},staticRenderFns:[]};var W=t("VU/8")(N,Q,!1,function(n){t("LBVU")},null,null).exports;a.a.use(i.a);var Y=new i.a({routes:[{path:"/",name:"Main",component:W}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:Y,components:{App:s},template:"<App/>"})},tjgF:function(n,e){}},["NHnr"]);
//# sourceMappingURL=app.fd83d93615b79a6c2949.js.map